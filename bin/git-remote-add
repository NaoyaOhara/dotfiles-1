#!/bin/bash -eu
name=${1:-}
if [[ -z $name ]]; then
  echo 'set name' 2>&1
  exit 1
fi
url="$(git remote -v | grep origin | head -1 | cut -f2 | cut -d' ' -f1 | \
  NAME="$name" perl -F/ -ape '$F[3] = $ENV{NAME}; $_ = join "/", @F')"
if [[ -z $url ]]; then
  echo "failed to set url for $name" 2>&1
  exit 1
fi
git remote add "$name" "$url"
git fetch "$name"
echo
echo "added $name remote setting successfully"
