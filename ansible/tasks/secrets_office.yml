---
- name: local_perl.sh
  template: >-
    src=local_perl.sh.j2
    dest=~/git/dotfiles/bin/local_perl.sh
  when: ansible_hostname == secret_office.hostnames[0]
- file: path=~/git/dotfiles/bin/local_perl.sh mode=0755
  when: ansible_hostname == secret_office.hostnames[0]

- name: make config for calling API
  copy:
    content: '{{ secret_office_api_config }}'
    dest: '{{ secret_office_api_config_file }}'
  when: ansible_hostname in secret_office.hostnames

- name: remove config for calling API
  file: path='{{ secret_office_api_config }}' state=absent
  when: ansible_hostname not in secret_office.hostnames

- name: make repo setting
  template: >-
    src=organization_envrc.j2
    dest=~/git/{{ secret_office_organization }}/.envrc
  when: ansible_hostname in secret_office.hostnames

- name: make repo vimrc
  template: >-
    src=organization_vimrc.j2
    dest=~/git/{{ secret_office_organization }}/.vimrc.local
  when: ansible_hostname in secret_office.hostnames

- name: make dev envrc
  template: >-
    src=organization_envrc_go.j2
    dest=~/git/{{ secret_office_dev_envrc.repo }}/.envrc
  when: ansible_hostname in secret_office.hostnames
